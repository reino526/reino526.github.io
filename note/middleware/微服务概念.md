---
sort: 1
---

# 微服务概念



## 服务架构

​	**单体架构**：将业务的所有功能集中在一个项目中开发，打成一个包部署

​	**优点**：

- 架构简单
- 部署成本低

​	**缺点**：

- 代码耦合度高



​	**分布式架构**：根据业务功能对系统进行拆分，每个业务模块作为独立项目开发，称为一个服务

​	**优点**：

- 降低服务耦合
- 有利于服务升级拓展

​	缺点：

- 架构非常复杂
- 运维、监控、部署难度提高

​	**要考虑的问题**：

- 服务拆分粒度如何
- 服务集群地址如何维护
- 服务之间如何实现远程调用
- 服务健康状态如何感知



​	微服务是一种经过良好架构设计的分布式架构方案，微服务架构特征：

- 单一职责：微服务拆会粒度更小，每一个服务都对应唯一的业务能力，做到单一职责，避免重复业务开发
- 面向服务：微服务对外暴露业务接口
- 自治：团队独立、技术独立、数据独立、部署独立
- 隔离性强：服务调用做好隔离、容错、降级、避免出现级联的问题



## 微服务技术对比

​	微服务结构：微服务这种技术需要技术框架来落地，全球的互联网公司都在积极尝试自己的微服务落地技术，国内最知名的就是SpringCloud和阿里巴巴的Dubbo

|                |        Dubbo         |       SpringCloud        |    SpringCloudAlibaba    |
| :------------: | :------------------: | :----------------------: | :----------------------: |
|    注册中心    |   zookeeper、Redis   |      Eureka、Consul      |      Nacos、Eureka       |
|  服务远程调用  |      Dubbo协议       |    Feign（http协议）     |       Dubbo、Feign       |
|    配置中心    |          无          |    SpringCloudConfig     | SpringCloudConfig、Nacos |
|    服务网关    |          无          | SpringCloudGateway、Zuul | SpringCloudGateway、Zuul |
| 服务监控和保护 | dubbo-admain，功能弱 |         Hystrix          |         Sentinel         |



## 服务拆分及远程调用

​	注意事项：

- 不同微服务，不要重复开发相同业务
- 微服务数据独立，不要访问其它微服务的数据库
- 微服务可以将自己的业务暴露为接口，供其它微服务调用



​	远程调用

- 基于RestTemplate发起的http请求实现远程调用
- http请求做远程调用是与语言无关的调用，只要知道对方的ip、端口、接口路径、请求参数即可



## 提供者和消费者

- 服务提供者：一次业务中，被其它微服务调用的服务（提供接口给其它微服务）
- 服务消费者：一次业务中，调用其它微服务的服务（调用其它微服务提供的接口）

​	提供者与消费者角色其实是相对的

​	一个服务可以同时是服务提供者和服务消费者

问题：

- 服务消费者该如何获取服务提供者的地址信息
- 如果有多个服务提供者，消费者该如何选择
- 消费者如何得知服务提供者的健康状态

